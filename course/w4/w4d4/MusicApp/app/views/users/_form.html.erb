<% action_url = user.persisted? ? user_url(url) : users_url %>
<% http_method = user.persisted? ? "PATCH" : "POST" %>
<% button_text = user.persisted? ? "Update" : "Create" %>

<form action="<%= action_url %>" method="POST">
  <input type="hidden" name="_method" value="<%= http_method %>">
  <input
    type="hidden"
    name="authenticity_token"
    value="<%= form_authenticity_token %>">

  <label>Email
    <input type="text" name="user[email]" value="<%= user.email %>">
  </label>

  <br/><br/>

  <label>Password
    <input type="password" name="user[password]">
  </label>

  <br/><br/>

  <button>"<%= button_text %>"</button>
</form
